{% extends 'base.html' %}
{% load humanize %}

{% block content %}
  <main class="container">
    <section>
      <h4>
        Official Scoring Summary: {{contest}}<br>
      </h4>
    </section>
    <section>
      <div class='table-responsive'>
        <table class='table'>
          <thead>
            <tr>
              <th>Place</th>
              <th>Total</th>
              <th>Group</th>
              <th>Song</th>
              <th>MUS</th>
              <th>PRS</th>
              <th>SNG</th>
              <th>TotS</th>
              <th>M%</th>
              <th>P%</th>
              <th>S%</th>
              <th>T%</th>
            </tr>
          </thead>
          <tbody>
            {% for performer in performers %}
                <tr>
                  <td>
                    {{performer.place}}
                  </td>
                  <td>
                    {{performer.total_points}}<br>
                    {{performer.total_score}}
                  </td>
                  <td>
                    {{performer.group.name}}
                  </td>
                  <td>
                    {% for performance in performer.performances.all %}
                      {% for song in performance.songs.all %}
                        {{song.tune.name}}<br>
                      {% endfor %}
                    {% endfor %}
                    <em>Totals</em>
                  </td>
                  <td>
                    {% for performance in performer.performances.all %}
                      {% for song in performance.songs.all %}
                        {{song.mus_points}}<br>
                      {% endfor %}
                    {% endfor %}
                      <em>{{performer.mus_points}}</em><br>
                  </td>
                  <td>
                    {% for performance in performer.performances.all %}
                      {% for song in performance.songs.all %}
                        {{song.prs_points}}<br>
                      {% endfor %}
                    {% endfor %}
                      <em>{{performer.prs_points}}</em><br>
                  </td>
                  <td>
                    {% for performance in performer.performances.all %}
                      {% for song in performance.songs.all %}
                        {{song.sng_points}}<br>
                      {% endfor %}
                    {% endfor %}
                      <em>{{performer.sng_points}}</em><br>
                  </td>
                  <td>
                    {% for performance in performer.performances.all %}
                      {% for song in performance.songs.all %}
                        {{song.total_points}}<br>
                      {% endfor %}
                    {% endfor %}
                      <em>{{performer.total_points}}</em><br>
                  </td>
                  <td>
                    {% for performance in performer.performances.all %}
                      {% for song in performance.songs.all %}
                        {{song.mus_score}}<br>
                      {% endfor %}
                    {% endfor %}
                      <em>{{performer.mus_score}}</em><br>
                  </td>
                  <td>
                    {% for performance in performer.performances.all %}
                      {% for song in performance.songs.all %}
                        {{song.prs_score}}<br>
                      {% endfor %}
                    {% endfor %}
                      <em>{{performer.prs_score}}</em><br>
                  </td>
                  <td>
                    {% for performance in performer.performances.all %}
                      {% for song in performance.songs.all %}
                        {{song.sng_score}}<br>
                      {% endfor %}
                    {% endfor %}
                      <em>{{performer.sng_score}}</em><br>
                  </td>
                  <td>
                    {% for performance in performer.performances.all %}
                      {% for song in performance.songs.all %}
                        {{song.total_score}}<br>
                      {% endfor %}
                    {% endfor %}
                      <em>{{performer.total_score}}</em><br>
                  </td>
                </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>
    <section>
      <h4>Contests</h4>
      <ul class='list-unstyled'>
      {% for contestant in contest.contestants.all %}
        <li>{{contestant.contest.name}}: {{contestant.performer.group.name}}</li>
      {% endfor %}
      </ul>
    </section>
    <section>
      <h4>Judges</h4>
      <div class='table-responsive'>
      <table class='table'>
      {% regroup judges by get_category_display as judges_list %}
      <tbody>
      {% for get_category_display in judges_list %}
      <tr>
        {% for judge in get_category_display.list %}
          <td>{{judge.person.name}}, {{judge.designation}}</td>
        {% endfor %}
        </tr>
      {% endfor %}
      </tbody>

      </table>
      </div>
    </section>
  </main>
{% endblock content %}
