{% extends 'base.html' %}
{% load staticfiles %}
{% load humanize %}

{% block title %}
    {{convention}}
{% endblock title %}


{% block content %}
  <div class="container">
    <div class='page-header'>
      <p>
        <h2>{{convention}}</h2>
      </p>
    </div>

    <div class='row'>
      <div class='col-sm-6'>
      </div>
    </div>

    <br><br>



    {% regroup performances by contest as performance_list %}
    {% for contest in performance_list %}
     <p> {{contest.grouper.convention.location}}, {{contest.grouper.convention.year}}</p>
      <div class="table-responsive">
        <table class='table'>
          <tr>
            <th>Round</th>
            <th>Songs</th>
            <th>MUS</th>
            <th>PRS</th>
            <th>SNG</th>
            <th>Total</th>
          </tr>
          {% for performance in contest.list %}
            <tr>
              <td>{{performance.get_round_display}}<br>{{performance.place|ordinal}} Place</td>
              <td>{{performance.song1|truncatechars:40}}<br>{{performance.song2|truncatechars:40}}</td>
              <td>{{performance.mus1_rata|floatformat:1}}<br>{{performance.mus2_rata|floatformat:1}}</td>
              <td>{{performance.prs1_rata|floatformat:1}}<br>{{performance.prs2_rata|floatformat:1}}</td>
              <td>{{performance.sng1_rata|floatformat:1}}<br>{{performance.sng2_rata|floatformat:1}}</td>
              <td>{{performance.song1_rata|floatformat:1}}<br>{{performance.song2_rata|floatformat:1}}</td>
            </tr>
          {% endfor %}
        </table>
      </div>
      {% endfor %}
      </p>
    </div>
  </div> <!-- /container -->
{% endblock content %}
